---
title: rabbitmq cluster
tags:
  - untag
category:
  - uncategory
author: bsyonline
lede: 没有摘要
date: 2020-04-27 17:39:00
thumbnail:
---



RabbitMQ 集群有两种：普通集群模式和镜像集群模式。

#### 普通集群模式

queue 的数据只保存在一个节点上，queue 的元数据信息每个节点都会保存。消费者可以连到任意一个节点上进行消费，如果这个节点没有 queue 的数据，这个节点会先从保存 queue 数据的节点把数据同步过来，再给消费者消费。

这种模式无法保证高可用，如果保存 queue 数据的节点宕机，数据就无法消费。另外，由于消费时会同步数据，所以，在节点之间会有大量 IO 。

#### 镜像集群模式

和普通集群模式不同，镜像集群模式会在每个节点保存 queue 的数据。当生产者往 MQ 的一个节点写一条数据，MQ 会同步到所有节点，这样消费者可以连到任意一个节点进行消费，这种模式可以保证高可用，但是单机存储会有瓶颈。